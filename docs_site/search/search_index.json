{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Documentation Overview","text":"<p>Use this portal as the canonical reference for operations, APIs, and AI tooling.</p>"},{"location":"#product-api-users","title":"Product &amp; API users","text":"<ul> <li>Public API guide \u2013 authentication, rate limits, and sample requests for consumer integrations and AI agents that hit the hosted API.</li> <li>Deployment &amp; operations \u2013 Hetzner server layout, deploy scripts, health checks, and rollback procedures.</li> <li>Main project README \u2013 local dev setup, email/search infrastructure, and codebase layout.</li> </ul>"},{"location":"#ai-agents-mcp-integrations","title":"AI agents &amp; MCP integrations","text":"<ul> <li>MCP setup \u2013 details for each Model Context Protocol server (products, stores, analytics, etc.) and the required environment variables.</li> <li>ChatGPT integration \u2013 how to expose the MCP servers to ChatGPT\u2019s Model Context Protocol UI.</li> <li>Agent guide \u2013 condensed guardrails; the full policy still lives in <code>AGENTS.md</code> at the repo root.</li> </ul>"},{"location":"#quick-pointers","title":"Quick pointers","text":"<ul> <li>Hosted API base URL: <code>https://partle.rubenayla.xyz</code></li> <li>Read\u2011only API keys: <code>pk_test_chatgpt_readonly_key</code>, <code>pk_test_claude_readonly_key</code></li> <li>MCP manifest: <code>mcp-manifest.json</code> at the repo root</li> </ul> <p>Keep these docs in sync whenever infrastructure (API keys, MCP servers, Elasticsearch, etc.) changes so both humans and AI assistants have a single source of truth.</p>"},{"location":"agents/","title":"AI Assistant Guide","text":"<p>This is a summary for any AI agent or MCP client that interacts with Partle. For the full rulebook see <code>AGENTS.md</code>.</p> <p>MCP tools still experimental</p> <p>The MCP servers, ChatGPT integration, and other AI tooling are being prototyped. Validate every workflow manually before relying on automated interactions.</p>"},{"location":"agents/#ground-rules","title":"Ground rules","text":"<ul> <li>Single production database: <code>postgresql://partle_user@91.98.68.236:5432/partle</code>. Never create or migrate against local databases unless explicitly told.</li> <li>Secrets live in per-service <code>.env</code> files (<code>backend/.env</code>, <code>frontend/.env</code>). Do not invent new environment variables without approval.</li> <li>Authentication UX: one combined login/signup endpoint (<code>/v1/auth/login</code>). Never add separate pages or flows.</li> <li>Ports: frontend dev on 3000, backend on 8000, Postgres 5432, Elasticsearch 9200.</li> </ul>"},{"location":"agents/#assisted-workflows","title":"Assisted workflows","text":"<ul> <li>Trigger the React search bar and layout only from <code>Layout.tsx</code> (one global instance).</li> <li><code>SearchBar</code> controls are fixed at top; mobile vs. desktop components should not be duplicated.</li> <li>When building scripts/tests, run <code>npm run build</code> for the frontend and <code>uv run python -c \"from app.main import app\"</code> for backend sanity checks.</li> </ul>"},{"location":"agents/#incident-response","title":"Incident response","text":"<ul> <li>Credential exposure requires immediate rotation and notification (see <code>AGENTS.md</code> for the full procedure). Last incident: 2025\u201109\u201105 when <code>backend/downloaded_server.env</code> was committed.</li> </ul>"},{"location":"agents/#mcp-ai-integrations","title":"MCP / AI integrations","text":"<ul> <li>Local MCP scripts live in <code>backend/scripts/run_mcp_*.py</code>.</li> <li>Configure ChatGPT/Claude using the <code>mcp-manifest.json</code> in the repo root or follow <code>docs/mcp-setup.md</code>.</li> </ul> <p>\ud83d\udec8 Always review <code>AGENTS.md</code> before making automated changes; this page just highlights the most critical constraints.</p>"},{"location":"chatgpt-integration/","title":"ChatGPT Integration with Partle MCP Servers","text":""},{"location":"chatgpt-integration/#overview","title":"Overview","text":"<p>This guide explains how to connect ChatGPT to your Partle MCP servers, enabling ChatGPT to access your Partle platform data and perform sophisticated analysis through natural language queries.</p> <p>Status</p> <p>This integration is not fully operational yet. Use the steps below for experimentation only; expect to troubleshoot manual connections and MCP discovery issues.</p>"},{"location":"chatgpt-integration/#prerequisites","title":"Prerequisites","text":"<ol> <li>Running Partle Backend: Your FastAPI server must be running on <code>http://localhost:8000</code></li> <li>MCP Servers: At least one Partle MCP server should be available</li> <li>ChatGPT Plus/Pro Account: Required for MCP integrations</li> <li>Local Development Environment: MCP servers run locally</li> </ol>"},{"location":"chatgpt-integration/#auto-discovery-process","title":"Auto-Discovery Process","text":"<p>ChatGPT can automatically discover and connect to your Partle MCP servers using several methods:</p>"},{"location":"chatgpt-integration/#method-1-mcp-manifest-auto-discovery","title":"Method 1: MCP Manifest Auto-Discovery","text":"<ol> <li> <p>Place the Manifest File:     <code>bash    # Your mcp-manifest.json should be in your project root    /path/to/partle/mcp-manifest.json</code></p> </li> <li> <p>ChatGPT Discovery:</p> </li> <li>ChatGPT will scan common locations for MCP manifests</li> <li>It looks for <code>mcp-manifest.json</code> in project roots</li> <li> <p>The manifest describes all available Partle servers</p> </li> <li> <p>Automatic Configuration:</p> </li> <li>ChatGPT reads server capabilities from the manifest</li> <li>Configures connection parameters automatically</li> <li>Sets up proper environment variables</li> </ol>"},{"location":"chatgpt-integration/#method-2-documentation-based-discovery","title":"Method 2: Documentation-Based Discovery","text":"<p>ChatGPT can discover your servers by reading the setup documentation:</p> <ol> <li> <p>Documentation Files:    <code>docs/mcp-setup.md          # Main setup guide    docs/chatgpt-integration.md # This file    mcp-manifest.json          # Server manifest</code></p> </li> <li> <p>Discovery Process:</p> </li> <li>ChatGPT scans for MCP-related documentation</li> <li>Extracts server commands and capabilities</li> <li>Builds configuration from available information</li> </ol>"},{"location":"chatgpt-integration/#method-3-direct-api-discovery","title":"Method 3: Direct API Discovery","text":"<p>If your Partle API includes MCP endpoint information:</p> <ol> <li>API Endpoint: <code>GET /v1/mcp/servers</code></li> <li>Response Format:    <code>json    {      \"servers\": [        {          \"name\": \"partle-products\",          \"description\": \"Product search and analysis\",          \"command\": [\"python\", \"backend/scripts/run_mcp_products.py\"],          \"capabilities\": [\"search_products\", \"get_product\"],          \"status\": \"available\"        }      ]    }</code></li> </ol>"},{"location":"chatgpt-integration/#manual-configuration-guide","title":"Manual Configuration Guide","text":"<p>If auto-discovery doesn't work, configure ChatGPT manually:</p>"},{"location":"chatgpt-integration/#step-1-start-mcp-servers","title":"Step 1: Start MCP Servers","text":"<pre><code># Start the servers you need\ncd /path/to/partle\n\n# Products server (most commonly used)\nuv run python backend/scripts/run_mcp_products.py &amp;\n\n# Analytics server (for business intelligence)\nuv run python backend/scripts/run_mcp_analytics.py &amp;\n\n# Add others as needed\nuv run python backend/scripts/run_mcp_stores.py &amp;\n</code></pre>"},{"location":"chatgpt-integration/#step-2-configure-chatgpt","title":"Step 2: Configure ChatGPT","text":"<ol> <li>Open ChatGPT Settings:</li> <li> <p>Go to Settings \u2192 Beta Features \u2192 Model Context Protocol</p> </li> <li> <p>Add MCP Server:</p> </li> <li>Name: <code>Partle Products</code></li> <li>Description: <code>Access to Partle product database and search</code></li> <li>Command: <code>python backend/scripts/run_mcp_products.py</code></li> <li>Working Directory: <code>/path/to/partle</code></li> <li> <p>Environment Variables:      <code>PARTLE_API_URL=http://localhost:8000</code></p> </li> <li> <p>Repeat for Other Servers:    ```    Server: Partle Analytics    Command: python backend/scripts/run_mcp_analytics.py</p> </li> </ol> <p>Server: Partle Stores    Command: python backend/scripts/run_mcp_stores.py</p> <p>Server: Partle Price Intelligence    Command: python backend/scripts/run_mcp_price_intelligence.py    ```</p>"},{"location":"chatgpt-integration/#step-3-test-configuration","title":"Step 3: Test Configuration","text":"<p>Try these test queries in ChatGPT:</p> <pre><code>\"Search for products in the Partle database\"\n\"Show me platform analytics overview\"  \n\"Find stores near a specific location\"\n\"Analyze pricing trends in electronics\"\n</code></pre>"},{"location":"chatgpt-integration/#usage-examples","title":"Usage Examples","text":""},{"location":"chatgpt-integration/#basic-product-queries","title":"Basic Product Queries","text":"<pre><code>User: \"What products do we have in electronics category?\"\nChatGPT: Uses partle-products server \u2192 search_products tool with tags filter\n\nUser: \"Show me the most expensive items\"\nChatGPT: Uses partle-products server \u2192 search_products with sort_by=\"price_desc\"\n</code></pre>"},{"location":"chatgpt-integration/#business-intelligence-queries","title":"Business Intelligence Queries","text":"<pre><code>User: \"Give me a platform overview with key metrics\"\nChatGPT: Uses partle-analytics server \u2192 get_platform_overview tool\n\nUser: \"Which stores are performing best?\"\nChatGPT: Uses partle-analytics server \u2192 get_top_performers tool\n</code></pre>"},{"location":"chatgpt-integration/#location-based-analysis","title":"Location-Based Analysis","text":"<pre><code>User: \"Find stores within 10km of coordinates 40.7128, -74.0060\"\nChatGPT: Uses partle-stores server \u2192 find_stores_near_location tool\n\nUser: \"Identify market gaps for expansion\"  \nChatGPT: Uses partle-location-intelligence server \u2192 find_market_gaps tool\n</code></pre>"},{"location":"chatgpt-integration/#advanced-analysis","title":"Advanced Analysis","text":"<pre><code>User: \"Compare pricing strategies across our top 5 stores\"\nChatGPT: Uses partle-price-intelligence server \u2192 compare_store_pricing tool\n\nUser: \"Recommend products similar to product ID 123\"\nChatGPT: Uses partle-recommendations server \u2192 recommend_similar_products tool\n</code></pre>"},{"location":"chatgpt-integration/#server-selection-guide","title":"Server Selection Guide","text":"<p>ChatGPT will automatically choose the right server based on your query:</p> Query Type Primary Server Fallback Servers Product search Products Analytics, Recommendations Store information Stores Analytics, Location Intelligence Business metrics Analytics Products, Stores Pricing analysis Price Intelligence Analytics, Products Location queries Location Intelligence Stores Recommendations Recommendations Products, Analytics"},{"location":"chatgpt-integration/#troubleshooting","title":"Troubleshooting","text":""},{"location":"chatgpt-integration/#connection-issues","title":"Connection Issues","text":"<ol> <li>Server Not Found:    ```bash    # Check if server process is running    ps aux | grep mcp</li> </ol> <p># Restart server manually    uv run python backend/scripts/run_mcp_products.py    ```</p> <ol> <li>API Connection Failed:    ```bash    # Test API connectivity    curl http://localhost:8000/v1/products/</li> </ol> <p># Check environment variables    echo $PARTLE_API_URL    ```</p> <ol> <li>ChatGPT Can't Connect:</li> <li>Verify working directory path is correct</li> <li>Check that Python and UV are in PATH</li> <li>Ensure no firewall blocking connections</li> </ol>"},{"location":"chatgpt-integration/#discovery-issues","title":"Discovery Issues","text":"<ol> <li>Manifest Not Found:    ```bash    # Verify manifest location    ls -la mcp-manifest.json</li> </ol> <p># Check file permissions    chmod 644 mcp-manifest.json    ```</p> <ol> <li>Servers Not Auto-Detected:</li> <li>Check that server scripts are executable</li> <li>Verify manifest syntax is valid JSON</li> <li>Ensure documentation files are present</li> </ol>"},{"location":"chatgpt-integration/#performance-issues","title":"Performance Issues","text":"<ol> <li>Slow Responses:</li> <li>Check Partle API performance</li> <li>Reduce query complexity</li> <li> <p>Use specific rather than broad queries</p> </li> <li> <p>Memory Usage:</p> </li> <li>Don't run all servers simultaneously unless needed</li> <li>Monitor system resources</li> <li>Restart servers periodically</li> </ol>"},{"location":"chatgpt-integration/#security-considerations","title":"Security Considerations","text":""},{"location":"chatgpt-integration/#local-development","title":"Local Development","text":"<ul> <li>MCP servers run locally only</li> <li>No external network access required</li> <li>Data stays on your machine</li> </ul>"},{"location":"chatgpt-integration/#production-considerations","title":"Production Considerations","text":"<ul> <li>Use proper authentication on Partle API</li> <li>Consider VPN for remote access</li> <li>Monitor server logs for unusual activity</li> <li>Use environment-specific configurations</li> </ul>"},{"location":"chatgpt-integration/#advanced-configuration","title":"Advanced Configuration","text":""},{"location":"chatgpt-integration/#custom-environment-setup","title":"Custom Environment Setup","text":"<p>Create a <code>.env.mcp</code> file:</p> <pre><code>PARTLE_API_URL=http://localhost:8000\nMCP_LOG_LEVEL=INFO\nMCP_TIMEOUT=120\nMCP_MAX_CONNECTIONS=10\n</code></pre>"},{"location":"chatgpt-integration/#server-specific-settings","title":"Server-Specific Settings","text":"<p>Each server can be customized:</p> <pre><code>{\n  \"partle-products\": {\n    \"max_results\": 100,\n    \"enable_elasticsearch\": true,\n    \"cache_timeout\": 300\n  },\n  \"partle-analytics\": {\n    \"enable_advanced_metrics\": true,\n    \"calculation_timeout\": 60\n  }\n}\n</code></pre>"},{"location":"chatgpt-integration/#api-integration-examples","title":"API Integration Examples","text":""},{"location":"chatgpt-integration/#custom-mcp-discovery-endpoint","title":"Custom MCP Discovery Endpoint","text":"<p>Add to your Partle FastAPI app:</p> <pre><code>@app.get(\"/v1/mcp/servers\")\ndef get_mcp_servers():\n    return {\n        \"servers\": [\n            {\n                \"name\": \"partle-products\",\n                \"description\": \"Product search and management\",\n                \"command\": [\"python\", \"backend/scripts/run_mcp_products.py\"],\n                \"capabilities\": [\"search_products\", \"get_product\"],\n                \"status\": \"available\",\n                \"health_check\": \"/v1/products/\",\n                \"documentation\": \"/docs/mcp-api.md#products\"\n            }\n        ],\n        \"manifest_url\": \"/mcp-manifest.json\",\n        \"documentation\": \"/docs/mcp-setup.md\"\n    }\n</code></pre>"},{"location":"chatgpt-integration/#health-check-endpoint","title":"Health Check Endpoint","text":"<pre><code>@app.get(\"/v1/mcp/health\")\ndef mcp_health():\n    return {\n        \"status\": \"healthy\",\n        \"servers_available\": 6,\n        \"api_version\": \"1.0.0\",\n        \"last_updated\": \"2025-08-31T00:00:00Z\"\n    }\n</code></pre>"},{"location":"chatgpt-integration/#best-practices","title":"Best Practices","text":"<ol> <li>Start with Core Servers: Begin with Products and Analytics servers</li> <li>Use Specific Queries: More targeted requests get better results  </li> <li>Monitor Performance: Watch API response times and server resource usage</li> <li>Regular Updates: Keep MCP library and servers updated</li> <li>Documentation: Keep server capabilities documentation current</li> </ol>"},{"location":"chatgpt-integration/#next-steps","title":"Next Steps","text":"<ol> <li>Test Basic Functionality: Try simple product searches first</li> <li>Explore Advanced Features: Experiment with analytics and intelligence servers</li> <li>Custom Integration: Modify servers for your specific business needs</li> <li>Production Deployment: Consider deployment strategies for production use</li> </ol> <p>The MCP integration provides powerful natural language access to your Partle data - start simple and gradually explore more advanced capabilities as you become comfortable with the system.</p>"},{"location":"deployment/","title":"Partle Deployment &amp; Operations","text":""},{"location":"deployment/#server-overview","title":"Server overview","text":"<ul> <li>Host: Hetzner VM <code>91.98.68.236</code> (Ubuntu 24.04)</li> <li>Domain: <code>partle.rubenayla.xyz</code></li> <li>Deploy user: <code>deploy</code> (passwordless sudo)  </li> <li>App paths: <code>/srv/partle/backend</code>, <code>/srv/partle/frontend</code></li> <li>Database: PostgreSQL <code>postgresql://partle_user@91.98.68.236:5432/partle</code></li> </ul>"},{"location":"deployment/#quick-deploy","title":"Quick deploy","text":"<p>Automated </p> <pre><code>/srv/partle/scripts/deploy.sh\n</code></pre> <p>Manual checklist</p> <pre><code># Backup\npg_dump -h 91.98.68.236 -U partle_user partle &gt; backup_$(date +%Y%m%d).sql\ntar -czf frontend_dist_backup_$(date +%Y%m%d).tar.gz -C /srv/partle/frontend dist\n\n# Pull latest\ncd /srv/partle\ngit fetch origin main &amp;&amp; git pull origin main\n\n# Backend update\ncd backend\nuv sync\nuv run alembic upgrade head\nsudo systemctl restart partle-backend\n\n# Frontend update\ncd ../frontend\nnpm ci\nnpm run build\n\n# Reload reverse proxy\nsudo nginx -t &amp;&amp; sudo systemctl reload nginx\n\n# Smoke tests\ncurl -s http://localhost:8000/health | jq\ncurl -I https://partle.rubenayla.xyz\n</code></pre>"},{"location":"deployment/#service-management","title":"Service management","text":""},{"location":"deployment/#backend-fastapi-systemd","title":"Backend (FastAPI + systemd)","text":"<pre><code>sudo systemctl status partle-backend\nsudo systemctl restart partle-backend\nsudo journalctl -u partle-backend -f\n# unit file: /etc/systemd/system/partle-backend.service\n</code></pre>"},{"location":"deployment/#frontend-static-files-via-nginx","title":"Frontend (static files via Nginx)","text":"<ul> <li>Build output: <code>/srv/partle/frontend/dist/</code></li> <li>Config: <code>/etc/nginx/sites-enabled/partle.rubenayla.xyz</code></li> </ul> <pre><code>cd /srv/partle/frontend &amp;&amp; npm run build\nsudo nginx -t &amp;&amp; sudo systemctl reload nginx\n</code></pre>"},{"location":"deployment/#monitoring-health","title":"Monitoring &amp; health","text":"<pre><code># Manual checks\ncurl -s http://localhost:8000/health | jq\nsystemctl status partle-backend nginx\ncurl -I https://partle.rubenayla.xyz\n\n# Optional cron health check\n*/5 * * * * /srv/partle/scripts/health_check.sh\ntail -f /var/log/partle/health_check.log\n</code></pre>"},{"location":"deployment/#troubleshooting-snippets","title":"Troubleshooting snippets","text":""},{"location":"deployment/#backend-wont-start","title":"Backend won\u2019t start","text":"<pre><code>sudo lsof -i :8000\nsudo journalctl -u partle-backend -n 50\nuv --version\npsql -h 91.98.68.236 -U partle_user -d partle -c \"SELECT 1\"\n</code></pre>"},{"location":"deployment/#frontend-blank-stale","title":"Frontend blank / stale","text":"<pre><code>ls -la /srv/partle/frontend/dist/\nsudo tail -f /var/log/nginx/error.log\nsudo nginx -t\n# If using Cloudflare -&gt; Purge cache\n</code></pre>"},{"location":"deployment/#database-issues","title":"Database issues","text":"<pre><code>psql -h 91.98.68.236 -U partle_user -d partle\ngrep DATABASE_URL /srv/partle/backend/.env\nsudo ufw status\n</code></pre>"},{"location":"deployment/#rollback","title":"Rollback","text":"<pre><code>cd /srv/partle\ncat backups/last_deployment_*.commit\ngit reset --hard &lt;COMMIT_HASH&gt;\n\nrm -rf frontend/dist\ntar -xzf backups/frontend_dist_&lt;TIMESTAMP&gt;.tar.gz -C frontend\n\ncd backend &amp;&amp; uv sync\nsudo systemctl restart partle-backend\nsudo systemctl reload nginx\n</code></pre>"},{"location":"deployment/#publishing-the-documentation-site","title":"Publishing the documentation site","text":"<p>MkDocs outputs static HTML under <code>site/</code>. Serve it from <code>/documentation</code> on Hetzner with Nginx.</p> <ol> <li>Build the docs locally (or on the server). Every <code>deploy.sh</code> run already does this, but you can trigger it manually for a fresh server:    <code>bash    cd backend    uv sync --extra docs    uv run mkdocs build -f ../mkdocs.yml -d /srv/partle/docs_site.tmp    rsync -av --delete /srv/partle/docs_site.tmp/ /srv/partle/docs_site/    rm -rf /srv/partle/docs_site.tmp</code></li> <li>Point Nginx at the repo-managed config once (pick <code>nginx-fixed.conf</code> or <code>nginx-optimized.conf</code>):    <code>bash    sudo ln -sf /srv/partle/nginx-fixed.conf /etc/nginx/sites-enabled/partle.rubenayla.xyz    # or sudo ln -sf /srv/partle/nginx-optimized.conf ...</code></li> <li>Ensure the config contains the documentation blocks:    ```    location = /documentation {        return 301 /documentation/;    }</li> </ol> <p>location /documentation/ {        alias /srv/partle/docs_site/;        try_files $uri $uri/ /index.html;        add_header Cache-Control \"no-cache\";    }    <code>`` 4. Reload Nginx:</code>sudo nginx -t &amp;&amp; sudo systemctl reload nginx`.</p> <p>You can integrate these steps into <code>deploy.sh</code> so the docs publish automatically during deployment.</p>"},{"location":"deployment/#deploy-checklists","title":"Deploy checklists","text":"<p>Pre-deploy - Tests pass locally - Alembic migrations verified - Environment variables confirmed - Secrets absent from git - <code>git status</code> clean</p> <p>Post-deploy - <code>curl http://localhost:8000/health</code> returns 200 - <code>curl -I https://partle.rubenayla.xyz</code> succeeds - <code>curl http://localhost:8000/v1/products/</code> works - <code>journalctl -u partle-backend -n 50</code> clean - Monitor logs for ~15 minutes</p>"},{"location":"deployment/#historical-server-bootstrap","title":"Historical server bootstrap","text":"<pre><code>adduser --disabled-password --gecos '' deploy\nusermod -aG sudo -s /bin/bash deploy\necho 'deploy ALL=(ALL) NOPASSWD:ALL' &gt; /etc/sudoers.d/deploy\n\ninstall -d -m 700 /home/deploy/.ssh\ninstall -m 600 /root/.ssh/authorized_keys /home/deploy/.ssh/authorized_keys\nchown -R deploy:deploy /home/deploy/.ssh\n\nsed -i 's/^#\\?PermitRootLogin.*/PermitRootLogin no/' /etc/ssh/sshd_config\nsystemctl restart ssh\n</code></pre>"},{"location":"mcp-setup/","title":"Partle MCP Servers Setup Guide","text":""},{"location":"mcp-setup/#overview","title":"Overview","text":"<p>Status</p> <p>MCP server integration is still experimental\u2014end-to-end ChatGPT connectivity has not been reliable yet. Treat this guide as a work-in-progress checklist rather than a production-ready solution.</p> <p>The Partle Model Context Protocol (MCP) servers provide ChatGPT and other AI assistants with direct access to your Partle platform data and functionality. These servers enable sophisticated analysis, recommendations, and insights through natural language interactions.</p>"},{"location":"mcp-setup/#available-mcp-servers","title":"Available MCP Servers","text":""},{"location":"mcp-setup/#1-products-server-partle-products","title":"1. Products Server (<code>partle-products</code>)","text":"<ul> <li>Search and filter products across the platform</li> <li>Advanced Elasticsearch-powered search capabilities</li> <li>Product details and store associations</li> <li>Use Cases: Product discovery, inventory analysis, competitive research</li> </ul>"},{"location":"mcp-setup/#2-stores-server-partle-stores","title":"2. Stores Server (<code>partle-stores</code>)","text":"<ul> <li>Store discovery and location-based queries</li> <li>Store analytics and performance metrics</li> <li>Geographic and demographic analysis</li> <li>Use Cases: Store management, market expansion, location analysis</li> </ul>"},{"location":"mcp-setup/#3-analytics-server-partle-analytics","title":"3. Analytics Server (<code>partle-analytics</code>)","text":"<ul> <li>Platform-wide business intelligence</li> <li>Performance metrics and KPI tracking</li> <li>Market insights and trend analysis</li> <li>Use Cases: Business reporting, strategic planning, market research</li> </ul>"},{"location":"mcp-setup/#4-price-intelligence-server-partle-price-intelligence","title":"4. Price Intelligence Server (<code>partle-price-intelligence</code>)","text":"<ul> <li>Competitive pricing analysis</li> <li>Price trend identification and forecasting</li> <li>Market positioning insights</li> <li>Use Cases: Pricing strategy, competitive analysis, profit optimization</li> </ul>"},{"location":"mcp-setup/#5-location-intelligence-server-partle-location-intelligence","title":"5. Location Intelligence Server (<code>partle-location-intelligence</code>)","text":"<ul> <li>Geographic market analysis</li> <li>Store density and coverage mapping</li> <li>Optimal location recommendations</li> <li>Use Cases: Expansion planning, market penetration, location strategy</li> </ul>"},{"location":"mcp-setup/#6-recommendations-server-partle-recommendations","title":"6. Recommendations Server (<code>partle-recommendations</code>)","text":"<ul> <li>Personalized product recommendations</li> <li>Trend detection and popularity analysis</li> <li>Shopping list optimization</li> <li>Use Cases: Customer experience, sales optimization, product discovery</li> </ul>"},{"location":"mcp-setup/#prerequisites","title":"Prerequisites","text":""},{"location":"mcp-setup/#system-requirements","title":"System Requirements","text":"<ul> <li>Python 3.12 or higher</li> <li>UV package manager</li> <li>Running Partle backend server</li> <li>MCP-compatible AI client (ChatGPT, Claude, etc.)</li> </ul>"},{"location":"mcp-setup/#installation","title":"Installation","text":"<ol> <li> <p>Install Dependencies <code>bash    cd backend/    uv sync</code></p> </li> <li> <p>Verify Installation <code>bash    uv run python -c \"from mcp.server import Server; print('MCP installed successfully')\"</code></p> </li> <li> <p>Start Partle Backend <code>bash    # Make sure your Partle API is running    uv run uvicorn app.main:app --reload</code></p> </li> </ol>"},{"location":"mcp-setup/#quick-start","title":"Quick Start","text":""},{"location":"mcp-setup/#running-individual-servers","title":"Running Individual Servers","text":"<p>Each MCP server can be started independently:</p> <pre><code># Products server\nuv run python backend/scripts/run_mcp_products.py\n\n# Stores server  \nuv run python backend/scripts/run_mcp_stores.py\n\n# Analytics server\nuv run python backend/scripts/run_mcp_analytics.py\n\n# Price intelligence server\nuv run python backend/scripts/run_mcp_price_intelligence.py\n\n# Location intelligence server\nuv run python backend/scripts/run_mcp_location_intelligence.py\n\n# Recommendations server\nuv run python backend/scripts/run_mcp_recommendations.py\n</code></pre>"},{"location":"mcp-setup/#testing-server-connection","title":"Testing Server Connection","text":"<p>Test that servers are working correctly:</p> <pre><code># Test products server import\nuv run python -c \"from app.mcp.products import mcp_server; print('Products server ready')\"\n\n# Test with a simple query (if your API has data)\nuv run python backend/scripts/run_mcp_products.py &amp;\n# Server will start and listen for MCP connections\n</code></pre>"},{"location":"mcp-setup/#configuration","title":"Configuration","text":""},{"location":"mcp-setup/#environment-variables","title":"Environment Variables","text":"<p>Set these environment variables for optimal performance:</p> <pre><code># Required\nexport PARTLE_API_URL=\"http://localhost:8000\"\n\n# Optional\nexport MCP_LOG_LEVEL=\"INFO\"\nexport MCP_TIMEOUT=\"120\"\n</code></pre>"},{"location":"mcp-setup/#api-configuration","title":"API Configuration","text":"<p>Ensure your Partle API is configured with:</p> <ul> <li>Products API (<code>/v1/products/</code>)</li> <li>Stores API (<code>/v1/stores/</code>)  </li> <li>Search API (<code>/v1/search/products/</code>) - for Elasticsearch features</li> <li>Proper CORS settings for MCP connections</li> </ul>"},{"location":"mcp-setup/#connecting-to-chatgpt","title":"Connecting to ChatGPT","text":""},{"location":"mcp-setup/#step-1-start-mcp-servers","title":"Step 1: Start MCP Servers","text":"<p>Choose which servers you need and start them:</p> <pre><code># Example: Start products and analytics servers\nuv run python backend/scripts/run_mcp_products.py &amp;\nuv run python backend/scripts/run_mcp_analytics.py &amp;\n</code></pre>"},{"location":"mcp-setup/#step-2-configure-chatgpt","title":"Step 2: Configure ChatGPT","text":"<ol> <li>Open ChatGPT Settings</li> <li>Navigate to MCP/External Tools</li> <li>Add New MCP Server:</li> <li>Name: <code>Partle Products</code></li> <li>Command: <code>python backend/scripts/run_mcp_products.py</code></li> <li>Working Directory: <code>/path/to/partle</code></li> <li>Environment Variables: <code>PARTLE_API_URL=http://localhost:8000</code></li> </ol>"},{"location":"mcp-setup/#step-3-test-connection","title":"Step 3: Test Connection","text":"<p>In ChatGPT, try commands like: - \"Show me the latest products in the Partle database\" - \"Analyze store performance metrics\" - \"Find pricing outliers in electronics category\" - \"Recommend optimal locations for new stores\"</p>"},{"location":"mcp-setup/#server-capabilities-overview","title":"Server Capabilities Overview","text":"Server Key Functions Best For Products Search, filter, product details Product discovery, catalog management Stores Location search, store analytics Store operations, location analysis Analytics Platform metrics, business intelligence Strategic planning, reporting Price Intelligence Pricing analysis, competitive insights Pricing strategy, market positioning Location Intelligence Geographic analysis, market gaps Expansion planning, location strategy Recommendations Product suggestions, trend analysis Customer experience, sales optimization"},{"location":"mcp-setup/#troubleshooting","title":"Troubleshooting","text":""},{"location":"mcp-setup/#common-issues","title":"Common Issues","text":"<ol> <li> <p>\"Module not found\" errors <code>bash    # Make sure you're in the backend directory and using uv    cd backend/    uv sync    uv run python scripts/run_mcp_products.py</code></p> </li> <li> <p>API connection failures    ```bash    # Verify your Partle API is running    curl http://localhost:8000/v1/products/</p> </li> </ol> <p># Check environment variables    echo $PARTLE_API_URL    ```</p> <ol> <li>Server startup issues    ```bash    # Check for port conflicts    lsof -i :8000</li> </ol> <p># Restart with verbose logging    MCP_LOG_LEVEL=DEBUG uv run python scripts/run_mcp_products.py    ```</p>"},{"location":"mcp-setup/#performance-tips","title":"Performance Tips","text":"<ol> <li>Start only needed servers - Each server uses resources</li> <li>Use specific queries - More targeted requests get better responses</li> <li>Monitor API performance - Ensure your Partle backend is responsive</li> <li>Batch operations - Multiple related queries work efficiently</li> </ol>"},{"location":"mcp-setup/#security-considerations","title":"Security Considerations","text":"<ul> <li>Local Network Only: MCP servers should only be accessible locally</li> <li>API Authentication: Ensure proper authentication on your Partle API</li> <li>Data Privacy: MCP servers access your business data directly</li> <li>Network Security: Use appropriate firewall rules for production</li> </ul>"},{"location":"mcp-setup/#next-steps","title":"Next Steps","text":"<ol> <li>Read the API Reference: <code>docs/mcp-api.md</code></li> <li>Try the Examples: <code>docs/mcp-examples.md</code></li> <li>Customize for Your Needs: Modify server configurations as needed</li> <li>Integration: Connect with your preferred AI assistant</li> </ol>"},{"location":"mcp-setup/#support","title":"Support","text":"<p>For issues with MCP servers: 1. Check the logs for error messages 2. Verify your Partle API is working correctly 3. Ensure proper environment configuration 4. Test individual server components</p> <p>The MCP servers provide powerful integration capabilities - start with one server and gradually add others based on your needs.</p>"},{"location":"public-api-guide/","title":"Partle Public API Guide for AI Services","text":""},{"location":"public-api-guide/#overview","title":"Overview","text":"<p>The Partle Public API provides read-only access to marketplace data specifically designed for AI assistants like ChatGPT, Claude, and other automated services. This API enables AI systems to search products, browse stores, retrieve platform statistics, and provide intelligent responses about the Partle marketplace.</p>"},{"location":"public-api-guide/#quick-start","title":"Quick Start","text":"<p>Base URL: <code>https://partle.rubenayla.xyz</code> API Version: v1 Authentication: API Key (Bearer token) Rate Limits: 100 requests per hour per API key  </p>"},{"location":"public-api-guide/#authentication","title":"Authentication","text":"<p>All API endpoints require authentication via Bearer token:</p> <pre><code>curl -H \"Authorization: Bearer pk_test_chatgpt_readonly_key\" \\\n     \"https://partle.rubenayla.xyz/v1/public/products\"\n</code></pre>"},{"location":"public-api-guide/#available-api-keys","title":"Available API Keys","text":"Service API Key Purpose ChatGPT <code>pk_test_chatgpt_readonly_key</code> OpenAI GPT integrations Claude <code>pk_test_claude_readonly_key</code> Anthropic Claude integrations <p>Production keys are configured via environment variables: <code>CHATGPT_API_KEY</code> and <code>CLAUDE_API_KEY</code></p>"},{"location":"public-api-guide/#api-endpoints","title":"API Endpoints","text":""},{"location":"public-api-guide/#1-health-check","title":"1. Health Check","text":"<p>No authentication required</p> <pre><code>GET /v1/public/health\n</code></pre> <p>Response:</p> <pre><code>{\n  \"status\": \"ok\",\n  \"timestamp\": \"2025-08-31T14:44:11.000Z\",\n  \"message\": \"Partle API is running\"\n}\n</code></pre>"},{"location":"public-api-guide/#2-products","title":"2. Products","text":"<p>Search and retrieve product information with filtering options.</p> <pre><code>GET /v1/public/products\n</code></pre> <p>Parameters: - <code>q</code> (string, optional): Search query for product names/descriptions - <code>limit</code> (integer, default: 20, max: 100): Number of results to return - <code>offset</code> (integer, default: 0): Skip items for pagination - <code>min_price</code> (float, optional): Minimum price filter - <code>max_price</code> (float, optional): Maximum price filter - <code>tags</code> (string, optional): Comma-separated tag names</p> <p>Example:</p> <pre><code>curl -H \"Authorization: Bearer pk_test_chatgpt_readonly_key\" \\\n     \"https://partle.rubenayla.xyz/v1/public/products?q=electronics&amp;limit=10&amp;min_price=50\"\n</code></pre> <p>Response:</p> <pre><code>[\n  {\n    \"id\": 115,\n    \"name\": \"Cinta adhesiva de tejido del tipo \\\"americano\\\"\",\n    \"spec\": null,\n    \"url\": \"https://www.example.com/product/115\",\n    \"price\": 12.50,\n    \"image_url\": \"https://www.example.com/images/115.jpg\",\n    \"store\": {\n      \"id\": 1,\n      \"name\": \"Electronics Store\",\n      \"address\": \"Main St 123\"\n    },\n    \"tags\": [\n      {\"name\": \"adhesive\"},\n      {\"name\": \"tape\"}\n    ]\n  }\n]\n</code></pre>"},{"location":"public-api-guide/#3-stores","title":"3. Stores","text":"<p>Retrieve store information with pagination.</p> <pre><code>GET /v1/public/stores\n</code></pre> <p>Parameters: - <code>limit</code> (integer, default: 20, max: 50): Number of stores to return - <code>offset</code> (integer, default: 0): Skip items for pagination</p> <p>Example:</p> <pre><code>curl -H \"Authorization: Bearer pk_test_chatgpt_readonly_key\" \\\n     \"https://partle.rubenayla.xyz/v1/public/stores?limit=5\"\n</code></pre> <p>Response:</p> <pre><code>[\n  {\n    \"id\": 2,\n    \"name\": \"Electronics Hub\",\n    \"lat\": 40.7128,\n    \"lon\": -74.0060,\n    \"address\": \"123 Main Street, New York, NY\",\n    \"owner_id\": 10,\n    \"type\": \"physical\",\n    \"homepage\": \"https://electronicshub.com\"\n  }\n]\n</code></pre>"},{"location":"public-api-guide/#4-search-advanced","title":"4. Search (Advanced)","text":"<p>Elasticsearch-powered product search with advanced filtering.</p> <pre><code>GET /v1/public/search\n</code></pre> <p>Parameters: - <code>q</code> (string, required): Search query - <code>limit</code> (integer, default: 10, max: 50): Number of results - <code>filters</code> (string, optional): Additional filters (implementation specific)</p> <p>Example:</p> <pre><code>curl -H \"Authorization: Bearer pk_test_chatgpt_readonly_key\" \\\n     \"https://partle.rubenayla.xyz/v1/public/search?q=smartphone&amp;limit=5\"\n</code></pre> <p>Note: Falls back gracefully if Elasticsearch is unavailable with error message:</p> <pre><code>{\n  \"detail\": \"Search service temporarily unavailable\"\n}\n</code></pre>"},{"location":"public-api-guide/#5-platform-statistics","title":"5. Platform Statistics","text":"<p>Get high-level platform metrics and information.</p> <pre><code>GET /v1/public/stats\n</code></pre> <p>Example:</p> <pre><code>curl -H \"Authorization: Bearer pk_test_chatgpt_readonly_key\" \\\n     \"https://partle.rubenayla.xyz/v1/public/stats\"\n</code></pre> <p>Response:</p> <pre><code>{\n  \"total_products\": 177,\n  \"total_stores\": 4022,\n  \"last_updated\": \"2025-08-31T14:43:48.015305\",\n  \"api_version\": \"1.0\",\n  \"description\": \"Partle marketplace - Find products and stores\"\n}\n</code></pre>"},{"location":"public-api-guide/#rate-limiting","title":"Rate Limiting","text":"<p>All public endpoints are rate-limited to 100 requests per hour per client.</p> <p>Rate Limit Headers:</p> <pre><code>X-RateLimit-Limit: 100\nX-RateLimit-Remaining: 97  \nX-RateLimit-Reset: 1756655052\n</code></pre> <p>Rate Limit Exceeded:</p> <pre><code>{\n  \"detail\": \"Rate limit exceeded. Max 100 requests per 3600 seconds.\"\n}\n</code></pre>"},{"location":"public-api-guide/#error-handling","title":"Error Handling","text":""},{"location":"public-api-guide/#authentication-errors","title":"Authentication Errors","text":"<p>Missing API Key:</p> <pre><code>HTTP/1.1 401 Unauthorized\n{\n  \"detail\": \"Not authenticated\"\n}\n</code></pre> <p>Invalid API Key:</p> <pre><code>HTTP/1.1 401 Unauthorized  \n{\n  \"detail\": \"Invalid API key\"\n}\n</code></pre>"},{"location":"public-api-guide/#general-errors","title":"General Errors","text":"<p>Server Error:</p> <pre><code>HTTP/1.1 500 Internal Server Error\n{\n  \"detail\": \"Internal server error message\"\n}\n</code></pre> <p>Service Unavailable:</p> <pre><code>HTTP/1.1 503 Service Unavailable\n{\n  \"detail\": \"Search service temporarily unavailable\"\n}\n</code></pre>"},{"location":"public-api-guide/#ai-integration-examples","title":"AI Integration Examples","text":""},{"location":"public-api-guide/#chatgpt-custom-gpt-configuration","title":"ChatGPT Custom GPT Configuration","text":"<p>For ChatGPT Custom GPT creation:</p> <ol> <li>Authentication: API Key</li> <li>API Key: <code>pk_test_chatgpt_readonly_key</code></li> <li>Schema: Import from <code>https://partle.rubenayla.xyz/openapi.json</code></li> <li>Base URL: <code>https://partle.rubenayla.xyz</code></li> </ol>"},{"location":"public-api-guide/#claude-mcp-integration","title":"Claude MCP Integration","text":"<p>Claude can access the API through the MCP manifest file:</p> <pre><code># Point Claude to your MCP manifest\n/path/to/partle/mcp-manifest.json\n</code></pre>"},{"location":"public-api-guide/#direct-api-integration","title":"Direct API Integration","text":"<p>For custom AI applications:</p> <pre><code>import httpx\n\nclass PartleAPI:\n    def __init__(self, api_key: str, base_url: str = \"https://partle.rubenayla.xyz\"):\n        self.api_key = api_key\n        self.base_url = base_url\n        self.headers = {\"Authorization\": f\"Bearer {api_key}\"}\n\n    def search_products(self, query: str, limit: int = 20):\n        response = httpx.get(\n            f\"{self.base_url}/v1/public/products\",\n            headers=self.headers,\n            params={\"q\": query, \"limit\": limit}\n        )\n        return response.json()\n\n    def get_stats(self):\n        response = httpx.get(\n            f\"{self.base_url}/v1/public/stats\",\n            headers=self.headers\n        )\n        return response.json()\n\n# Usage\napi = PartleAPI(\"pk_test_chatgpt_readonly_key\")\nproducts = api.search_products(\"electronics\", limit=10)\nstats = api.get_stats()\n</code></pre>"},{"location":"public-api-guide/#use-case-examples","title":"Use Case Examples","text":""},{"location":"public-api-guide/#e-commerce-assistant","title":"E-commerce Assistant","text":"<pre><code>User: \"Find me wireless headphones under \u20ac100\"\nAI Query: GET /v1/public/products?q=wireless headphones&amp;max_price=100\nAI Response: Lists matching wireless headphone products with prices, store info, and links\n</code></pre>"},{"location":"public-api-guide/#business-intelligence","title":"Business Intelligence","text":"<pre><code>User: \"How many stores are in the platform?\"\nAI Query: GET /v1/public/stats\nAI Response: \"The Partle marketplace currently has 4,022 stores and 177 products.\"\n</code></pre>"},{"location":"public-api-guide/#store-locator","title":"Store Locator","text":"<pre><code>User: \"Show me electronics stores\"\nAI Query: GET /v1/public/stores + filter analysis\nAI Response: Lists stores with electronics products, including addresses and contact info\n</code></pre>"},{"location":"public-api-guide/#product-comparison","title":"Product Comparison","text":"<pre><code>User: \"Compare prices for smartphones\"\nAI Query: Multiple calls to /v1/public/products?q=smartphone\nAI Response: Comparative analysis of smartphone prices across different stores\n</code></pre>"},{"location":"public-api-guide/#best-practices-for-ai-integration","title":"Best Practices for AI Integration","text":""},{"location":"public-api-guide/#1-efficient-query-patterns","title":"1. Efficient Query Patterns","text":"<ul> <li>Use specific search terms rather than broad queries</li> <li>Implement pagination for large result sets</li> <li>Combine filters to narrow results effectively</li> </ul>"},{"location":"public-api-guide/#2-error-handling","title":"2. Error Handling","text":"<ul> <li>Respect rate limits and implement backoff strategies</li> <li>Handle service unavailability gracefully (especially search)</li> <li>Validate API responses before processing</li> </ul>"},{"location":"public-api-guide/#3-caching-strategy","title":"3. Caching Strategy","text":"<ul> <li>Cache platform stats (low update frequency)</li> <li>Cache store information (relatively static)</li> <li>Don't cache product searches (dynamic results)</li> </ul>"},{"location":"public-api-guide/#4-user-experience","title":"4. User Experience","text":"<ul> <li>Provide source attribution (\"According to Partle marketplace...\")</li> <li>Include direct links to products when available</li> <li>Format prices with currency (\u20ac symbol)</li> </ul>"},{"location":"public-api-guide/#api-limits-and-quotas","title":"API Limits and Quotas","text":"Endpoint Rate Limit Max Results Notes <code>/health</code> Unlimited - No auth required <code>/products</code> 100/hour 100 per request Most used endpoint <code>/stores</code> 100/hour 50 per request Less frequently updated <code>/search</code> 100/hour 50 per request Requires Elasticsearch <code>/stats</code> 100/hour - Recommended caching"},{"location":"public-api-guide/#development-vs-production","title":"Development vs Production","text":""},{"location":"public-api-guide/#production-environment","title":"Production Environment","text":"<ul> <li>Base URL: <code>https://partle.rubenayla.xyz</code></li> <li>API Keys: Production keys (via environment variables)</li> <li>CORS: Restricted origins  </li> <li>Rate Limits: Strictly enforced</li> <li>HTTPS: Required for all requests</li> </ul>"},{"location":"public-api-guide/#troubleshooting","title":"Troubleshooting","text":""},{"location":"public-api-guide/#common-issues","title":"Common Issues","text":"<p>1. 401 Authentication Error - Verify API key is correct - Check Bearer token format - Ensure key hasn't expired</p> <p>2. Rate Limit Exceeded - Implement exponential backoff - Reduce request frequency - Consider request batching</p> <p>3. Search Service Unavailable - Fall back to <code>/products</code> endpoint - Implement retry logic - User-friendly error messages</p> <p>4. Slow Response Times - Check network connectivity - Reduce result limits - Use more specific queries</p>"},{"location":"public-api-guide/#getting-help","title":"Getting Help","text":"<ul> <li>API Documentation: <code>https://partle.rubenayla.xyz/docs</code></li> <li>OpenAPI Schema: <code>https://partle.rubenayla.xyz/openapi.json</code> </li> <li>MCP Integration: <code>docs/chatgpt-integration.md</code></li> <li>Issues: GitHub repository issues section</li> </ul>"},{"location":"public-api-guide/#changelog","title":"Changelog","text":""},{"location":"public-api-guide/#version-100-2025-08-31","title":"Version 1.0.0 (2025-08-31)","text":"<ul> <li>Initial public API release</li> <li>Authentication with API keys</li> <li>Rate limiting implementation</li> <li>Full CRUD operations for products and stores</li> <li>Platform statistics endpoint</li> <li>Elasticsearch integration with fallback</li> <li>Comprehensive error handling</li> <li>CORS support for web applications</li> </ul> <p>The Partle Public API is designed specifically for AI assistant integration, providing reliable access to marketplace data while maintaining security and performance standards. Start with the basic endpoints and gradually explore advanced features as your integration needs grow.</p>"}]}